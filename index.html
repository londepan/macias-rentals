<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Macias Specialty – Genie TZ-50DC Rental Agreement & Booking</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Dependencies for PDF generation -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js" defer></script>

  <style>
    :root{ --ink:#212529; --muted:#5c6770; --steel:#2f5d75; --border:#e5e7eb; }
    body{ font-family: Helvetica, Arial, sans-serif; margin:20px; color:var(--ink); }
    .toolbar{ display:flex; gap:12px; align-items:center; margin-bottom:16px; flex-wrap:wrap; }
    .btn{ padding:8px 14px; border:0; border-radius:10px; background:#2f5d75; color:#fff; cursor:pointer; }
    .btn.secondary{ background:#f56f27; }
    .section{ border:1px solid var(--border); border-radius:12px; padding:14px; margin:14px 0; }
    .section h3{ margin:0 0 8px 0; color:var(--steel); }
    .grid{ display:grid; grid-template-columns:repeat(2, minmax(220px,1fr)); gap:10px 14px; }
    input[type="text"], input[type="date"], input[type="time"], textarea, select{
      width:100%; padding:8px; border:1px solid #cbd5e1; border-radius:8px;
    }
    .muted{ color:var(--muted); font-size:.95rem; }
    a.buttonlike{ text-decoration:none; background:#e2e8f0; color:#111; padding:8px 12px; border-radius:10px; }
  </style>
</head>
<body>

  <div class="toolbar">
    <strong>MACIAS SPECIALTY CONTRACTING — Genie TZ-50DC Towable Boom Lift</strong>
    <button class="btn" type="button" onclick="makePDF()">Create PDF</button>
  </div>

  <div class="section">
    <h3>About the Genie TZ-50DC</h3>
    <p class="muted">The Genie® TZ™-50DC towable boom lift provides industry‑leading outreach and working range. Ideal for contractors, facility maintenance, painters, tree services, and more. Easy to tow and quick to set up for safe access at height.</p>
  </div>

  <div class="section">
    <h3>Lift Specifications</h3>
    <ul>
      <li>Max Working Height: 55 ft (16.76 m)</li>
      <li>Max Platform Height: 50 ft (15.24 m)</li>
      <li>Horizontal Outreach: 29 ft (8.89 m)</li>
      <li>Lifting Capacity: 500 lbs (227 kg)</li>
      <li>Power: 24V DC Battery System</li>
      <li>Weight: ~4,300 lbs (1,950 kg)</li>
      <li>Auto‑leveling outriggers; drive and set options</li>
    </ul>
  </div>

  <div class="section" id="calendar">
    <h3>Availability Calendar</h3>
    <p class="muted">This is a live calendar embed. Replace with your Google Calendar public embed when ready.</p>
    <iframe class="calendar" src="https://calendar.google.com/calendar/embed?src=en.usa%23holiday%40group.v.calendar.google.com&ctz=America%2FChicago"
            style="width:100%;height:640px;border:0;border-radius:12px"></iframe>
  </div>

  <div class="section">
    <h3>Rental Rates</h3>
    <p><strong>$400/day</strong> · <strong>$1,000/week</strong> · <strong>$2,500/month</strong> — <em>$250 deposit required to confirm booking</em></p>

    <div class="grid">
      <div><label>Start Date <input id="bw_start" type="date" /></label></div>
      <div><label>End Date <input id="bw_end" type="date" /></label></div>
      <div><label>Full Name <input id="bw_name" type="text" placeholder="Your name" /></label></div>
      <div><label>Phone <input id="bw_phone" type="text" placeholder="(xxx) xxx-xxxx" /></label></div>
      <div style="grid-column:1/-1"><label>Email <input id="bw_email" type="text" placeholder="you@company.com" /></label></div>
    </div>

    <p id="bw_price" class="muted">Pick dates to see price. (Daily $400 · Weekly $1,000 · Monthly $2,500 · $250 deposit)</p>

    <div style="display:flex;gap:10px;align-items:center;margin-top:12px">
      <div id="bw_status" class="muted"></div>
      <button class="btn" type="button" onclick="bwCheck()">Check Availability</button>
      <button class="btn secondary" type="button" onclick="bwBook()" id="bw_book" disabled>Book Now — $250 Deposit</button>
    </div>
  </div>

  <div class="section" id="capture">
    <h3>Rental Agreement – Macias Specialty Contracting, LLC</h3>
    <p class="muted">Website: www.maciasspecialty.com • Phone: 682‑248‑3278 • Address: 2418 Cales Dr., Arlington, TX 76013</p>

    <div class="grid">
      <label>Renter Name <input type="text"></label>
      <label>Company <input type="text"></label>
      <label>Phone <input type="text"></label>
      <label>Email <input type="text"></label>
      <label>Billing Address <input type="text"></label>
      <label>Rental Term <input type="text" placeholder="Daily / Weekly / Monthly"></label>
      <label>Start Date <input type="date"></label>
      <label>End Date <input type="date"></label>
    </div>

    <p><strong>Deposit:</strong> $250 required to reserve equipment. Renter consents to all safety regulations, OSHA/ANSI compliance, and Macias Specialty Contracting terms.</p>

    <button class="btn" type="button" onclick="makePDF()">Generate Rental PDF</button>
  </div>

  <script>
    const RATES = { day: 400, week: 1000, month: 2500, deposit: 250 };
    function daysBetween(a,b){ try{ const d1=new Date(a), d2=new Date(b); const ms=d2-d1; if(!isFinite(ms)||ms<=0) return 0; return Math.ceil(ms/86400000);}catch(e){return 0;} }
    function bestPrice(days){ if(days<=0) return {label:'—', total:0}; let d=days,total=0,parts=[]; const take=(n,u,p)=>{const k=Math.floor(d/n); if(k>0){total+=k*p; parts.push(`${k} ${u}${k>1?'s':''}`); d-=k*n;}}; take(30,'month',RATES.month); take(7,'week',RATES.week); take(1,'day',RATES.day); return {label:parts.join(' + ')||'1 day', total}; }
    async function apiCheckAvailability(start,end){ return { available:true }; }
    async function bwCheck(){
      const s=document.getElementById('bw_start').value, e=document.getElementById('bw_end').value;
      const days=daysBetween(s,e);
      const price=bestPrice(days);
      const priceLine=(days>0)?`${price.label} = $${price.total.toLocaleString()} (+ $${RATES.deposit} deposit)`:'Pick valid dates to see price';
      document.getElementById('bw_price').textContent=priceLine;
      const statusEl=document.getElementById('bw_status');
      const bookBtn=document.getElementById('bw_book');
      if(days<=0){ statusEl.textContent=''; bookBtn.disabled=true; return; }
      const res=await apiCheckAvailability(s,e);
      if(res.available){ statusEl.textContent='Available'; bookBtn.disabled=false; } else { statusEl.textContent='Waitlist'; bookBtn.disabled=false; }
    }
    async function bwBook(){
      const name=document.getElementById('bw_name').value.trim();
      const phone=document.getElementById('bw_phone').value.trim();
      const email=document.getElementById('bw_email').value.trim();
      if(!name||!phone||!email){ alert('Please complete name, phone, and email.'); return; }
      alert('Demo booking created. In production, this will collect the $250 deposit via Stripe and confirm your dates.');
    }
  </script>

  <script src="macias-pdf.js" defer></script>
</body>
</html>